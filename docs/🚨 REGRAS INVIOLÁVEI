  

---

## ğŸš¨ REGRAS INVIOLÃVEIS (100% OBRIGATÃ“RIAS â€“ SEM EXCEÃ‡Ã•ES)

1. **TUDO DEVE SER 100% REAL**  
   - **Nenhum** mock data, placeholder, array fake, "dados de teste" ou "TODO: integrar".  
   - Todo conteÃºdo (diagnÃ³sticos, respostas, progresso, relatÃ³rios, trilhas) **vem do Supabase**.  
   - Se nÃ£o estÃ¡ conectado ao banco â†’ a funcionalidade **nÃ£o existe**.

2. **ZERO PLACEHOLDERS / "EM CONSTRUÃ‡ÃƒO"**  
   - PÃ¡ginas "Under Construction", "Em breve" ou arquivos com apenas um tÃ­tulo + comentÃ¡rio TODO sÃ£o **proibidos**.  
   - Se a funcionalidade nÃ£o estÃ¡ minimamente pronta â†’ **nÃ£o criar** a rota, menu ou arquivo.

3. **BANCO DE DADOS PRIMEIRO**  
   Antes de criar qualquer pÃ¡gina ou feature:  
   - Tabela deve existir no Supabase  
   - RLS (Row Level Security) configurada (filtrar por `student_id` ou `parent_id`)  
   - Ãndices criados para performance  
   - Trigger de `updated_at` configurado  
   - Campos sensÃ­veis (respostas, notas) protegidos

4. **TRATAMENTO OBRIGATÃ“RIO DOS 4 ESTADOS EM TODA TELA QUE BUSCA DADOS**  
   - **Loading** â†’ Skeleton ou LoadingSpinner amigÃ¡vel  
   - **Error** â†’ Card de erro com mensagem clara + botÃ£o "Tentar novamente"  
   - **Empty** â†’ EmptyState bonito, acolhedor e acionÃ¡vel (ex: "FaÃ§a seu primeiro diagnÃ³stico agora!")  
   - **Success** â†’ ConteÃºdo real do banco

5. **SEGURANÃ‡A E LGPD (DADOS DE MENORES)**  
   - Consentimento parental explÃ­cito e destacado (obrigatÃ³rio para menores de 18 anos)  
   - Sempre filtrar por `student_id` ou `parent_id` (RLS forte)  
   - Dados sensÃ­veis anonimizados quando possÃ­vel  
   - Auditoria inicial de conformidade LGPD recomendada  
   - Proibido logar dados pessoais no console

6. **NUNCA CORES HARDCODED**  
   - Sempre usar CSS variables: `var(--surface)`, `var(--text-primary)`, `var(--accent-success)`, etc.  
   - Status:  
     - Acertos â†’ `--accent-success`  
     - AtenÃ§Ã£o â†’ `--accent-warning`  
     - Erro â†’ `--accent-alert`

7. **COMPONENTES shadcn/ui OBRIGATÃ“RIOS**  
   - Usar Card, Button, Badge, Table, Dialog, Skeleton, Toast, Input, Select, etc.  
   - Proibido criar divs customizadas para botÃµes, cards, tabelas ou modais.

8. **BUILD E TYPECHECK DEVEM PASSAR**  
   - `npm run build` sem erros  
   - `tsc --noEmit` sem warnings crÃ­ticos  
   - Antes de commit/push

---

## ğŸ—ï¸ ARQUITETURA CANÃ”NICA â€“ MENTORA

### Estrutura de Pastas

```
MENTORA/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ ui/                     â† shadcn/ui (NÃƒO MODIFICAR!)
â”‚   â”‚   â”œâ”€â”€ common/                 â† EmptyState, LoadingSpinner, ErrorCard, AvatarIA, ToastWrapper
â”‚   â”‚   â”œâ”€â”€ layout/                 â† HeaderAluno, HeaderPais, Footer, SidebarAluno, SidebarPais
â”‚   â”‚   â””â”€â”€ features/               â† DiagnosticoProgress, TrailCard, ReportSummary, ConquistaBadge
â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”œâ”€â”€ useAuth.ts
â”‚   â”‚   â”œâ”€â”€ useStudent.ts           â† aluno atual + dados do responsÃ¡vel
â”‚   â”‚   â”œâ”€â”€ useParent.ts            â† responsÃ¡vel logado
â”‚   â”‚   â”œâ”€â”€ useTheme.ts
â”‚   â”‚   â””â”€â”€ useToast.ts
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ supabase/
â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts            â† client supabase
â”‚   â”‚   â”‚   â”œâ”€â”€ types.ts            â† Student, Assessment, Answer, Trail, Progress...
â”‚   â”‚   â”‚   â”œâ”€â”€ queries/            â† funÃ§Ãµes reutilizÃ¡veis
â”‚   â”‚   â”‚   â””â”€â”€ useAuthStore.ts     â† Zustand ou Jotai para auth
â”‚   â”‚   â”œâ”€â”€ utils.ts                â† cn(), formatters (ex: formatar nota, tempo)
â”‚   â”‚   â””â”€â”€ constants.ts
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ DashboardAluno.tsx
â”‚   â”‚   â”œâ”€â”€ Diagnostico.tsx
â”‚   â”‚   â”œâ”€â”€ Relatorio.tsx
â”‚   â”‚   â”œâ”€â”€ AulasIA.tsx
â”‚   â”‚   â”œâ”€â”€ Progresso.tsx
â”‚   â”‚   â”œâ”€â”€ PerfilAluno.tsx
â”‚   â”‚   â”œâ”€â”€ Pais/
â”‚   â”‚   â”‚   â”œâ”€â”€ DashboardPais.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ RelatoriosFilhos.tsx
â”‚   â”‚   â”‚   â””â”€â”€ PerfilFilho.tsx
â”‚   â”‚   â””â”€â”€ Concursos/              â† ENEM, vestibulares (futuro)
â”‚   â”œâ”€â”€ features/
â”‚   â”‚   â”œâ”€â”€ adaptive-test/          â† LÃ³gica do diagnÃ³stico adaptativo
â”‚   â”‚   â”œâ”€â”€ avatar-ia/              â† Componente + lÃ³gica do avatar (voz, animaÃ§Ã£o)
â”‚   â”‚   â”œâ”€â”€ gamification/           â† Pontos, badges, ranking, streaks
â”‚   â”‚   â””â”€â”€ microlearning/          â† VÃ­deos curtos, exercÃ­cios rÃ¡pidos
â”‚   â”œâ”€â”€ styles/
â”‚   â”‚   â”œâ”€â”€ globals.css
â”‚   â”‚   â””â”€â”€ themes.css              â† Todas as variÃ¡veis CSS
â”‚   â””â”€â”€ App.tsx
â”‚       â””â”€â”€ main.tsx
â”œâ”€â”€ public/
â”‚   â””â”€â”€ assets/                     â† Ãcones, avatares, imagens educativas
â””â”€â”€ docs/
    â””â”€â”€ ROADMAP.md
```

### Sistema de Temas (4 Temas AmigÃ¡veis)

| ID                  | Nome                  | PÃºblico-Alvo            | Cor Principal          |
|---------------------|-----------------------|-------------------------|------------------------|
| `infantil-alegre`   | Infantil Alegre       | 6â€“10 anos               | Amarelo / Azul claro   |
| `jovem-foco`        | Jovem Foco            | 11â€“17 anos              | Roxo / Verde moderno   |
| `modo-noite`        | Modo Noturno          | Todos (reduz fadiga)    | Cinza escuro / Azul    |
| `alto-contraste`    | Alto Contraste        | Acessibilidade          | Preto / Branco forte   |

**Principais CSS Variables** (em `themes.css`):

```css
/* Backgrounds */
--bg                 /* Fundo principal */
--surface            /* Cards, painÃ©is */
--surface-strong     /* Hover/active */

/* Texts */
--text-primary
--text-secondary
--text-muted

/* Accents */
--accent-success     /* Verde - acertos */
--accent-warning     /* Amarelo - atenÃ§Ã£o */
--accent-alert       /* Vermelho - erro */
--accent-primary     /* Cor principal do tema */
--accent-secondary

/* Borders & Glows */
--border
--border-strong
--glow-success
```

### PadrÃ£o CanÃ´nico de PÃ¡gina

```tsx
// src/pages/Exemplo.tsx
import { useState, useEffect } from 'react'
import { supabase } from '@/lib/supabase'
import { useStudent } from '@/hooks/useStudent'
import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'
import { Skeleton } from '@/components/ui/skeleton'
import { Button } from '@/components/ui/button'
import { EmptyState } from '@/components/common/EmptyState'
import toast from 'react-hot-toast'

export default function Exemplo() {
  const { studentId } = useStudent()
  const [data, setData] = useState<any[]>([])
  const [loading, setLoading] = useState(true)
  const [error, setError] = useState<string | null>(null)

  useEffect(() => {
    if (!studentId) return
    fetchData()
  }, [studentId])

  async function fetchData() {
    try {
      setLoading(true)
      const { data, error } = await supabase
        .from('progresso')
        .select('*')
        .eq('student_id', studentId)
        .order('created_at', { ascending: false })

      if (error) throw error
      setData(data || [])
    } catch (err: any) {
      setError(err.message)
      toast.error(`Erro ao carregar: ${err.message}`)
    } finally {
      setLoading(false)
    }
  }

  if (loading) return <Skeleton className="h-64 w-full rounded-xl" />
  if (error) {
    return (
      <Card className="border-[var(--accent-alert)]/30 mx-4 my-6">
        <CardContent className="p-6 text-center">
          <p className="text-[var(--accent-alert)] mb-4">Erro: {error}</p>
          <Button onClick={fetchData}>Tentar novamente</Button>
        </CardContent>
      </Card>
    )
  }
  if (data.length === 0) {
    return (
      <EmptyState
        title="Nenhum progresso ainda"
        description="Comece fazendo seu primeiro diagnÃ³stico!"
        actionLabel="Iniciar DiagnÃ³stico"
        onAction={() => {/* redirecionar */}}
      />
    )
  }

  return (
    <div className="p-4 md:p-6 space-y-6">
      <h1 className="text-2xl md:text-3xl font-bold text-[var(--text-primary)]">Meu Progresso</h1>
      {/* ConteÃºdo real */}
    </div>
  )
}
```

---

## âœ… CHECKLIST PRÃ‰-COMMIT (OBRIGATÃ“RIO)

Antes de commitar:

- [ ] Zero cores hardcoded
- [ ] Usando apenas shadcn/ui para componentes bÃ¡sicos
- [ ] Queries filtram por `student_id` / `parent_id`
- [ ] 4 estados tratados (loading, error, empty, success)
- [ ] Nenhum mock/placeholder/TODO/FIXME
- [ ] Build passa (`npm run build`)
- [ ] TypeScript sem erros crÃ­ticos (`tsc --noEmit`)
- [ ] Responsividade testada (mobile-first)
- [ ] Toast para feedback de aÃ§Ãµes (sucesso/erro)

---

**Essa Ã© a fonte de verdade para todo o desenvolvimento da MENTORA.**  
**Violar essas regras gera retrabalho imediato.**

**Lembrete final:**  
> "Se nÃ£o estÃ¡ conectado ao Supabase e nÃ£o trata os 4 estados â†’ nÃ£o existe."


```
